# åŒæ•°æ®åº“æ¶æ„é…ç½®æŒ‡å—

## æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”Ÿäº§ç¯å¢ƒ erp.xianfeng-eu.com                            â”‚
â”‚  Vercel â†’ sysafari-logistics-api â†’ çœŸå®æ•°æ®åº“            â”‚
â”‚  ç”¨é€”ï¼šæ—¥å¸¸è¿è¥ï¼ŒçœŸå®ä¸šåŠ¡æ•°æ®                              â”‚
â”‚  æ•°æ®ï¼šåŸºç¡€æ•°æ® + ç®¡ç†å‘˜è´¦å·ï¼Œä¸šåŠ¡æ•°æ®ä»é›¶å¼€å§‹              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¼”ç¤ºç¯å¢ƒ demo.xianfeng-eu.com                           â”‚
â”‚  Vercel â†’ sysafari-logistics-demo-api â†’ è™šæ‹Ÿæ•°æ®åº“       â”‚
â”‚  ç”¨é€”ï¼šå®¢æˆ·å±•ç¤ºï¼Œæµ‹è¯•æ¼”ç¤º                                  â”‚
â”‚  æ•°æ®ï¼šå®Œæ•´çš„æµ‹è¯•æ•°æ®                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æœ¬åœ°å¼€å‘ localhost                                      â”‚
â”‚  :5173 â†’ :3001 â†’ æœ¬åœ° SQLite                            â”‚
â”‚  ç”¨é€”ï¼šå¼€å‘è°ƒè¯•ï¼Œä¸ä¸Šä¼ åˆ° GitHub                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒåŸåˆ™

1. **çœŸå®æ•°æ®åº“** = æ–°å»ºçš„ PostgreSQLï¼Œåªå­˜å‚¨åŸºç¡€æ•°æ®å’Œç®¡ç†å‘˜è´¦å·ï¼Œä¸šåŠ¡æ•°æ®ä»é›¶å¼€å§‹
2. **è™šæ‹Ÿæ•°æ®åº“** = ç°æœ‰çš„ PostgreSQLï¼Œä¿ç•™æ‰€æœ‰æµ‹è¯•æ•°æ®ï¼Œç”¨äºæ¼”ç¤º
3. **æœ¬åœ°æ•°æ®åº“** = SQLiteï¼Œä»…ç”¨äºå¼€å‘è°ƒè¯•ï¼Œ**ä¸ä¸Šä¼ åˆ° GitHub**
4. **æ•°æ®å®‰å…¨** = æœ¬åœ°ä»£ç ä¸Šä¼ æ—¶ä¸æºå¸¦ä»»ä½•æ•°æ®åº“æ•°æ®

## æ•°æ®åº“ä¿¡æ¯

| ç±»å‹ | æ•°æ®åº“åç§° | Render ID | ç”¨é€” | æ•°æ®å†…å®¹ |
|------|-----------|-----------|------|---------|
| çœŸå®æ•°æ®åº“ | logistics-production-db | dpg-d4vmk8pr0fns739omrrg-a | ç”Ÿäº§ç¯å¢ƒ | åŸºç¡€æ•°æ® + ç®¡ç†å‘˜ |
| è™šæ‹Ÿæ•°æ®åº“ | PostgreSQL | dpg-d4t44e56ubrc73ectgq0-a | æ¼”ç¤ºç¯å¢ƒ | å…¨éƒ¨æµ‹è¯•æ•°æ® |
| æœ¬åœ°æ•°æ®åº“ | orders.db | æœ¬åœ° SQLite | å¼€å‘æµ‹è¯• | å¼€å‘æ•°æ® |

## API æœåŠ¡ä¿¡æ¯

| ç¯å¢ƒ | æœåŠ¡åç§° | URL | Render ID | è¿æ¥æ•°æ®åº“ |
|------|----------|-----|-----------|-----------|
| ç”Ÿäº§ | sysafari-logistics-api | https://sysafari-logistics-api.onrender.com | srv-d4v9kg8gjchc73co09s0 | çœŸå®æ•°æ®åº“ |
| æ¼”ç¤º | sysafari-logistics-demo-api | https://sysafari-logistics-demo-api.onrender.com | srv-d4vd44qli9vc73dm4fkg | è™šæ‹Ÿæ•°æ®åº“ |

## åŸºç¡€æ•°æ®è¡¨æ¸…å•ï¼ˆè¿ç§»åˆ°çœŸå®æ•°æ®åº“ï¼‰

| è¡¨å | è¯´æ˜ |
|-----|------|
| shipping_companies | èˆ¹å…¬å¸ |
| container_codes | é›†è£…ç®±ä»£ç  |
| ports_of_loading | è£…è´§æ¸¯ |
| destination_ports | ç›®çš„æ¸¯ |
| countries | å›½å®¶ |
| air_ports | æœºåœº |
| transport_methods | è¿è¾“æ–¹å¼ |
| vat_rates | å¢å€¼ç¨ç‡ |
| service_fee_categories | æœåŠ¡è´¹ç±»åˆ« |
| service_fees | æœåŠ¡è´¹ |
| tariff_rates | å…³ç¨ç¨ç‡ |
| roles | è§’è‰² |
| permissions | æƒé™ |
| role_permissions | è§’è‰²æƒé™å…³è” |

**ä¸è¿ç§»çš„è¡¨ï¼ˆåœ¨çœŸå®æ•°æ®åº“ä¸­ä¸ºç©ºï¼‰ï¼š**
- bills_of_ladingï¼ˆæå•ï¼‰
- customersï¼ˆå®¢æˆ·ï¼‰
- suppliersï¼ˆä¾›åº”å•†ï¼‰
- feesï¼ˆè´¹ç”¨ï¼‰
- å…¶ä»–ä¸šåŠ¡æ•°æ®è¡¨

---

## é…ç½®æ­¥éª¤

### æ­¥éª¤ 1: è·å–æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²

1. ç™»å½• [Render Dashboard](https://dashboard.render.com)
2. è¿›å…¥ **PostgreSQL** æ•°æ®åº“åˆ—è¡¨
3. åˆ†åˆ«è·å–ä¸¤ä¸ªæ•°æ®åº“çš„ **External Database URL**:
   - **logistics-production-db** â†’ ç”¨äºç”Ÿäº§ç¯å¢ƒï¼ˆçœŸå®æ•°æ®åº“ï¼‰
   - **PostgreSQL** â†’ ç”¨äºæ¼”ç¤ºç¯å¢ƒï¼ˆè™šæ‹Ÿæ•°æ®åº“ï¼‰

è¿æ¥å­—ç¬¦ä¸²æ ¼å¼: `postgresql://ç”¨æˆ·:å¯†ç @ä¸»æœº/æ•°æ®åº“å?sslmode=require`

### æ­¥éª¤ 2: åˆå§‹åŒ–çœŸå®æ•°æ®åº“

åœ¨æœ¬åœ°ç»ˆç«¯æ‰§è¡Œ:

```bash
cd /Users/fengzheng/sysafari-logistics

# è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆæ›¿æ¢ä¸ºå®é™…è¿æ¥å­—ç¬¦ä¸²ï¼‰
export SOURCE_DATABASE_URL="è™šæ‹Ÿæ•°æ®åº“çš„è¿æ¥å­—ç¬¦ä¸²"
export TARGET_DATABASE_URL="çœŸå®æ•°æ®åº“çš„è¿æ¥å­—ç¬¦ä¸²"

# è¿è¡Œåˆå§‹åŒ–è„šæœ¬
node server/scripts/init-production-db.js
```

è„šæœ¬ä¼šè‡ªåŠ¨:
- åˆ›å»ºæ‰€æœ‰æ•°æ®åº“è¡¨
- ä»è™šæ‹Ÿæ•°æ®åº“è¿ç§»åŸºç¡€æ•°æ®ï¼ˆèˆ¹å…¬å¸ã€æ¸¯å£ã€å›½å®¶ç­‰ï¼‰
- åˆ›å»ºç®¡ç†å‘˜è´¦å· (admin / admin123)
- ä¸šåŠ¡æ•°æ®è¡¨ä¿æŒä¸ºç©º

### æ­¥éª¤ 3: é…ç½®ç”Ÿäº§ API ç¯å¢ƒå˜é‡

1. æ‰“å¼€ Render Dashboard
2. è¿›å…¥ **sysafari-logistics-api** æœåŠ¡
3. ç‚¹å‡» **Environment** æ ‡ç­¾
4. æ›´æ–°ç¯å¢ƒå˜é‡:
   - `DATABASE_URL` = **çœŸå®æ•°æ®åº“**çš„è¿æ¥å­—ç¬¦ä¸²
   - `NODE_ENV` = production
5. ä¿å­˜å¹¶ç­‰å¾…è‡ªåŠ¨é‡æ–°éƒ¨ç½²

### æ­¥éª¤ 4: é…ç½®æ¼”ç¤º API ç¯å¢ƒå˜é‡

1. æ‰“å¼€ Render Dashboard
2. è¿›å…¥ **sysafari-logistics-demo-api** æœåŠ¡
3. ç‚¹å‡» **Environment** æ ‡ç­¾
4. ç¡®è®¤ç¯å¢ƒå˜é‡:
   - `DATABASE_URL` = **è™šæ‹Ÿæ•°æ®åº“**çš„è¿æ¥å­—ç¬¦ä¸²
   - `NODE_ENV` = production
5. å–æ¶ˆæš‚åœçŠ¶æ€ï¼Œç­‰å¾…é‡æ–°éƒ¨ç½²

### æ­¥éª¤ 5: é…ç½®æ¼”ç¤ºå‰ç«¯ (Vercel)

ä½¿ç”¨ `vercel.demo.json` é…ç½®æ–‡ä»¶éƒ¨ç½²æ¼”ç¤ºç¯å¢ƒï¼š

```bash
cd /Users/fengzheng/sysafari-logistics
npx vercel --name sysafari-logistics-demo
```

ç„¶ååœ¨ Vercel Dashboard ç»‘å®šåŸŸå `demo.xianfeng-eu.com`

### æ­¥éª¤ 6: DNS é…ç½®

åœ¨åŸŸåç®¡ç†åå°æ·»åŠ :
- `demo.xianfeng-eu.com` â†’ CNAME â†’ `cname.vercel-dns.com`

---

## æœ¬åœ°å¼€å‘ç¯å¢ƒ

### å®‰è£…ä¾èµ–

```bash
# å®‰è£…å‰ç«¯ä¾èµ–
cd /Users/fengzheng/sysafari-logistics
npm install

# å®‰è£…åç«¯ä¾èµ–
cd server
npm install
```

### åˆå§‹åŒ–æœ¬åœ°æ•°æ®åº“

```bash
cd /Users/fengzheng/sysafari-logistics/server
npm run init-db
```

### å¯åŠ¨å¼€å‘ç¯å¢ƒ

```bash
# æ–¹å¼ä¸€ï¼šåˆ†åˆ«å¯åŠ¨
cd /Users/fengzheng/sysafari-logistics/server && npm run dev  # åç«¯
cd /Users/fengzheng/sysafari-logistics && npm run dev         # å‰ç«¯

# æ–¹å¼äºŒï¼šåŒæ—¶å¯åŠ¨
cd /Users/fengzheng/sysafari-logistics && npm run dev:all
```

### æœ¬åœ°è®¿é—®

- å‰ç«¯: http://localhost:5173
- åç«¯: http://localhost:3001
- è´¦å·: admin / admin123

---

## ä»£ç ä¸Šä¼ å®‰å…¨

`.gitignore` å·²é…ç½®ä»¥ä¸‹è§„åˆ™ï¼Œç¡®ä¿æœ¬åœ°æ•°æ®ä¸ä¼šä¸Šä¼ åˆ° GitHubï¼š

```
# Database files (SQLite)
server/data/
*.db
*.db-shm
*.db-wal

# Environment
.env
.env.local
.env.*.local
```

**ä¸Šä¼ ä»£ç å‰è¯·ç¡®è®¤ï¼š**
- è¿è¡Œ `git status` ç¡®è®¤æ²¡æœ‰æ•°æ®åº“æ–‡ä»¶è¢«æš‚å­˜
- `server/data/` ç›®å½•ä¸åœ¨ git è·Ÿè¸ªä¸­
- `.env` æ–‡ä»¶ä¸åœ¨ git è·Ÿè¸ªä¸­

---

## éªŒè¯æ¸…å•

### æœ¬åœ°å¼€å‘ç¯å¢ƒ
- [ ] `server/data/orders.db` SQLite æ•°æ®åº“æ–‡ä»¶å­˜åœ¨
- [ ] åç«¯å¯åŠ¨æ—¶æ˜¾ç¤º `ğŸ’¾ SQLite æ•°æ®åº“è¿æ¥å·²å»ºç«‹`
- [ ] http://localhost:5173 å¯è®¿é—®
- [ ] ä½¿ç”¨ admin / admin123 å¯ç™»å½•
- [ ] `git status` ä¸æ˜¾ç¤ºæ•°æ®åº“æ–‡ä»¶

### æ¼”ç¤ºç¯å¢ƒï¼ˆè™šæ‹Ÿæ•°æ®åº“ï¼‰
- [ ] demo.xianfeng-eu.com å¯è®¿é—®
- [ ] æµ‹è¯•æ•°æ®æ­£å¸¸æ˜¾ç¤º
- [ ] æ•°æ®æ“ä½œæ­£å¸¸

### ç”Ÿäº§ç¯å¢ƒï¼ˆçœŸå®æ•°æ®åº“ï¼‰
- [ ] erp.xianfeng-eu.com å¯è®¿é—®
- [ ] ä½¿ç”¨ admin / admin123 å¯ç™»å½•
- [ ] åŸºç¡€æ•°æ®ï¼ˆèˆ¹å…¬å¸ã€æ¸¯å£ç­‰ï¼‰æ­£å¸¸æ˜¾ç¤º
- [ ] ä¸šåŠ¡æ•°æ®ä¸ºç©ºï¼Œç­‰å¾…çœŸå®æ•°æ®å½•å…¥

### æ•°æ®éš”ç¦»éªŒè¯
- [ ] æ¼”ç¤ºç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„æ•°æ®ç›¸äº’ç‹¬ç«‹
- [ ] æœ¬åœ°åˆ›å»ºçš„æ•°æ®ä¸ä¼šå‡ºç°åœ¨äº‘ç«¯

---

## ç™»å½•ä¿¡æ¯

| ç¯å¢ƒ | URL | è´¦å· | å¯†ç  | è¯´æ˜ |
|------|-----|------|------|------|
| ç”Ÿäº§ | erp.xianfeng-eu.com | admin | admin123 | çœŸå®æ•°æ®åº“ç®¡ç†å‘˜ |
| æ¼”ç¤º | demo.xianfeng-eu.com | demo_admin | demo123 | è™šæ‹Ÿæ•°æ®åº“æ¼”ç¤ºè´¦å· |
| æ¼”ç¤º | demo.xianfeng-eu.com | demo_operator | demo123 | è™šæ‹Ÿæ•°æ®åº“æ¼”ç¤ºè´¦å· |
| å¼€å‘ | localhost:5173 | admin | admin123 | æœ¬åœ°å¼€å‘è´¦å· |

---

## å®‰å…¨æé†’

1. **æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²** å±äºæ•æ„Ÿä¿¡æ¯ï¼Œä»…åœ¨ Render Dashboard ä¸­é…ç½®ï¼Œç»ä¸æäº¤åˆ°ä»£ç ä»“åº“
2. **çœŸå®æ•°æ®åº“æ“ä½œ** éœ€è¦è°¨æ…ï¼Œå»ºè®®å…ˆåœ¨æ¼”ç¤ºç¯å¢ƒæµ‹è¯•
3. **æœ¬åœ°ä»£ç ä¸Šä¼ å‰** è¿è¡Œ `git status` ç¡®è®¤æ²¡æœ‰æ•°æ®åº“æ–‡ä»¶
4. **ç”Ÿäº§ç¯å¢ƒ** åªè¿æ¥çœŸå®æ•°æ®åº“ï¼Œä»»ä½•æµ‹è¯•æ•°æ®éƒ½ä¸åº”è¿›å…¥ç”Ÿäº§ç¯å¢ƒ
